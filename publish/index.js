"use strict";var e=require("react");const t=(e,t=!1,r)=>{let n=[];if(n=Array.isArray(e)?2===e.length?[e[1],e[0],e[1],e[0]]:[...e]:[e,e,e,e],t&&(n=[n[1],n[0],n[3],n[2]]),r){const e=[];for(let t=0;t<r;t++)e.push(n[t%4]);n=e}return n},r=({className:t,children:r,style:n,measure:o="inner",onResize:l})=>{const s=e.useRef(null);e.useEffect((()=>{const e=s.current;if(!e)return;const t=new ResizeObserver((e=>{for(const t of e)l&&l(t.contentRect)}));return t.observe(e),()=>{t.unobserve(e),t.disconnect()}}),[o,l]);const i={minWidth:"100%",minHeight:"100%"},c={width:"max-content",height:"max-content"},a={inner:Object.assign({},c),outer:Object.assign({},i),all:Object.assign(Object.assign({},i),c)};return e.createElement("div",{"resize-tracker":"",className:t,ref:s,style:Object.assign(Object.assign({},a[o]),n)},r)};function n(t,r){const n=e.useMemo((()=>function(e,t){let r=null;const n=(...n)=>{r&&clearTimeout(r),r=setTimeout((()=>{e(...n)}),t)};return n.cancel=()=>{r&&(clearTimeout(r),r=null)},n}(((...e)=>t(...e)),r)),[r]);return e.useEffect((()=>()=>{n.cancel()}),[n]),n}let o=1;var l=e.memo((({type:t,direction:r,progressReverse:n,size:o,progressTrigger:l,scrollBarOnHover:s,scrollBarEvent:i,thumbSize:c,thumbSpace:a,objLengthPerSize:u,sliderCheckLocal:d})=>{const m="sliderMenu"!==t?{onMouseDown:i,onTouchStart:i}:{},p=e.useMemo((()=>{if("scroll"===t||!r)return;const n=["hybrid","y"].includes(r)?"y":"x",s="x"===n?o[0]:o[1];return Array.from({length:u},((r,o)=>e.createElement("div",{key:o,className:"sliderElem",style:Object.assign({},"sliderMenu"===t&&{cursor:"pointer"}),onClick:"sliderMenu"===t?()=>{i(s*o,n,d)}:void 0},Array.isArray(null==l?void 0:l.progressElement)?l.progressElement[o]:null==l?void 0:l.progressElement)))}),[u,r,o,t,i,null==l?void 0:l.progressElement]);return e.createElement(e.Fragment,null,"scroll"===t?e.createElement("div",{className:"ms-bar",style:Object.assign(Object.assign(Object.assign({position:"absolute",width:"fit-content"},"x"===r?Object.assign({transformOrigin:"left top",height:`${o[0]}px`},n?{top:0,transform:"rotate(-90deg) translateX(-100%)"}:{transform:"rotate(-90deg)"}):Object.assign({top:0,height:"100%"},n?{left:0}:{right:0})),!1!=!(null==l?void 0:l.progressElement)&&{pointerEvents:"none"}),s&&{opacity:0,transition:"opacity 0.1s ease-in-out"})},e.createElement("div",Object.assign({className:"ms-thumb","data-direction":["hybrid","y"].includes(r)?"y":r},m,{style:Object.assign({height:`${c}px`,willChange:"transform",transform:`translateY(${a}px)`},(null==l?void 0:l.progressElement)&&{cursor:"grab"})}),null==l?void 0:l.progressElement)):u>1&&(null==l?void 0:l.progressElement)&&e.createElement("div",Object.assign({className:"ms-slider","data-direction":["hybrid","y"].includes(r)?"y":r},m,{style:Object.assign(Object.assign(Object.assign({position:"absolute",display:"flex"},"slider"===t&&{cursor:"grab"}),s&&{opacity:0,transition:"opacity 0.1s ease-in-out"}),"x"===r?Object.assign({transformOrigin:"left top",left:"50%",transform:"translateX(-50%)"},n?{top:0}:{bottom:0}):Object.assign({flexDirection:"column",top:"50%",transform:"translateY(-50%)"},n?{left:0}:{right:0}))}),p))}));var s=e.memo((({edgeGradient:t,visibility:r,edgeType:n})=>{if(!t)return null;const o=Object.assign(Object.assign(Object.assign(Object.assign({position:"absolute",pointerEvents:"none",transition:"opacity 0.1s ease-in-out"},t.color&&{background:t.color&&`linear-gradient(${"right"===n||"left"===n?"90deg, ":""}${t.color}, transparent)`}),"right"===n||"left"===n?{height:"100%",width:`${t.size}px`,top:0}:{width:"100%",height:`${t.size}px`,left:0}),n?{[n]:0}:{}),"right"===n?{transform:"scaleX(-1)"}:"bottom"===n?{transform:"scaleY(-1)"}:{});return e.createElement("div",{className:"ms-edge"+(n?` ${n}`:""),style:Object.assign(Object.assign({},o),{opacity:r?1:0})})}));var i=e.memo((({activity:t,arrows:r,arrowType:n,handleArrow:o,size:l})=>{const s=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",width:`${r.size}px`},n?{[n]:0}:{}),"top"===n&&{transform:"rotate(-90deg) translateX(-100%)",transformOrigin:"left top"}),"bottom"===n&&{transform:"rotate(90deg) translateX(-100%)",transformOrigin:"left bottom"}),"left"===n&&{transform:"scaleX(-1)"}),["top","bottom"].includes(n)?{height:`${l}px`}:{height:"100%",top:0});return e.createElement("div",{className:`ms-arrow-box ${n}${t?" active":""}`,style:Object.assign({},s),onClick:()=>o(n)},r.element)}));function c(e,t){if(e<=t)return 1;return Math.floor(e/t)}function a(e,t=0,r=1/0){return Math.max(t,Math.min(Math.round(e),r))}const u=(e,t,r)=>{if(!t)return;const n=t.querySelectorAll("."+("scroll"===e?"ms-thumb":"ms-slider"));n.length>0&&(r.current=n)};function d(e,t,r=0,n=0){return o=>{var l,s,i,c;const a={width:(null!==(l=o.width)&&void 0!==l?l:0)-r,height:(null!==(s=o.height)&&void 0!==s?s:0)-n};(null===(i=e.current)||void 0===i?void 0:i.width)===a.width&&(null===(c=e.current)||void 0===c?void 0:c.height)===a.height||(e.current=a,t())}}function m(t){const r=[],n=t=>{if(null===t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)r.push(String(t));else if("string"==typeof t)r.push(t);else if("function"==typeof t)r.push("<function>");else if(e.isValidElement(t))r.push("<react-node>");else if(Array.isArray(t))t.forEach(n);else if("object"==typeof t){const e=Object.entries(t).sort((([e],[t])=>e.localeCompare(t)));for(const[,t]of e)n(t)}else void 0===t&&r.push("<undefined>")};return n(t),r.join("/")}function p(e){var t,r,n;const o={x:"touches"in e.mouseEvent?e.mouseEvent.touches[0].clientX:e.mouseEvent.clientX,y:"touches"in e.mouseEvent?e.mouseEvent.touches[0].clientY:e.mouseEvent.clientY,leftover:null!==(r=null===(t=e.prevCoordsRef.current)||void 0===t?void 0:t.leftover)&&void 0!==r?r:0},l=null!==(n=e.prevCoordsRef.current)&&void 0!==n?n:o,s={x:o.x-l.x,y:o.y-l.y};e.prevCoordsRef.current=o;const i=t=>{if(!e.scrollElementRef||!e.objectsWrapperRef)return;let r=0;const n="x"===t?"movementX"in e.mouseEvent?e.mouseEvent.movementX:s.x:"movementY"in e.mouseEvent?e.mouseEvent.movementY:s.y,o=e.scrollElementRef;if("thumb"===e.clicked){const s=e.objectsWrapperRef,i=getComputedStyle(s),c="x"===t?o.clientWidth:o.clientHeight,a="x"===t?s.clientWidth+parseFloat(i.marginLeft)+parseFloat(i.marginRight):s.clientHeight+parseFloat(i.marginTop)+parseFloat(i.marginBottom),u=c-e.thumbSize,d=a-c;if(u<=0||d<=0)return;const m=n*(d/u)+l.leftover,p=Math.trunc(m),f=m-p;e.prevCoordsRef.current.leftover=f,r=p}else r=-n;"x"===t?(o.scrollLeft+=r,e.scrollStateRef.targetScrollX=o.scrollLeft):(o.scrollTop+=r,e.scrollStateRef.targetScrollY=o.scrollTop)},c=t=>{const r=e.objectsWrapperRef;if(!r)return;const n="slider"===e.type&&"wrapp"===e.clicked?-1:1,o=s[t]*n,l="x"===t?e.sizeLocal[0]:e.sizeLocal[1],i="x"===t?r.offsetWidth:r.offsetHeight,c="x"===t?e.scrollElementRef.scrollLeft:e.scrollElementRef.scrollTop;e.numForSliderRef.current+=Math.abs(o),e.numForSliderRef.current>6&&!e.isScrollingRef.current&&(o>0&&c+l<i?e.smoothScroll(c+l,t):o<0&&c>0&&e.smoothScroll(c-l,t),e.numForSliderRef.current=0)},a=t=>{"thumb"===e.clicked?i(t):"wrapp"===e.clicked?"slider"===e.type?c(t):i(t):"slider"===e.clicked&&c(t)};"hybrid"===e.direction?"wrapp"===e.clicked?(a("x"),a("y")):e.axisFromAtr&&a(e.axisFromAtr):a(e.direction||"y")}function f(e){if(e.controller.abort(),document.body.style.removeProperty("cursor"),["thumb","slider"].includes(e.clicked)&&e.mouseOnEl(e.scrollBar),"wrapp"===e.clicked&&e.mouseOnEl(e.objectsWrapperRef),e.clickedObject.current="none",e.scrollBarOnHover){let t=e.mouseEvent.target,r=!1;for(;t&&t!==document.body;){if(t===e.scrollContentRef){r=!0;break}t=t.parentNode}r||e.mouseOnRefHandle(e.mouseEvent)}e.prevCoordsRef.current=null,e.triggerUpdate()}const g=e=>{e&&("grab"===e.style.cursor?(e.style.cursor="grabbing",e.classList.add("active")):"grabbing"===e.style.cursor&&(e.style.cursor="grab",e.classList.remove("active")))},h="wrap-id",b=new Map,v=(e,t,r)=>{y(e);const n=setTimeout((()=>{t(),b.delete(e)}),r);b.set(e,n)},y=e=>{const t=b.get(e);t&&(clearTimeout(t),b.delete(e))};exports.IntersectionTracker=({className:r,children:n,style:o,root:l,threshold:s,rootMargin:i,visibleContent:c=!1,onVisible:a})=>{const[u,d]=e.useState(!1),m=e.useRef(null),p=i?t(i):null,f=p?`${p[0]}px ${p[1]}px ${p[2]}px ${p[3]}px`:"",g=e.useCallback((([e])=>{d(e.isIntersecting),e.isIntersecting&&a&&a(e)}),[a]);e.useEffect((()=>{const e=new IntersectionObserver(g,{root:l,threshold:s,rootMargin:f});return m.current&&e.observe(m.current),()=>{e.disconnect()}}),[g,l,s,f]);const h=c||u?n:null;return e.createElement("div",{"intersection-tracker":"",className:r,ref:m,style:o},h)},exports.MorphScroll=({type:y="scroll",className:x="",size:E,objectsSize:j,direction:O="y",gap:w,wrapperMargin:S,wrapperMinSize:R,progressReverse:M=!1,progressTrigger:k={wheel:!0},scrollBarOnHover:T=!1,suspending:$=!1,fallback:z=null,scrollPosition:C,edgeGradient:L,children:A,onScrollValue:F,elementsAlign:N=!1,elementsDirection:I="row",wrapperAlign:W,isScrolling:X,render:H,emptyElements:Y,crossCount:B})=>{var P,q,D,V,K,G;const U=n((()=>{Mt()}),40),_=n((()=>{ht()}),34),J=function(){const t=e.useRef(null);return null===t.current&&(t.current=""+o++),t.current}(),Q=e=>`Prop "${e}" is not provided\nMorphScroll〈♦${J}〉`;if(!E)throw new Error(Q("size"));0===Object.keys(k).length&&console.error(Q("progressTrigger"));const[Z,ee]=e.useState(0),te=()=>{ee((e=>"number"==typeof e&&e<1e3?e+1:0))},re=e.useRef(null),ne=e.useRef(null),oe=e.useRef(null),le=e.useRef(null),se=e.useRef([]),ie=e.useRef(null),ce=e.useRef("none"),ae=e.useRef({loaded:[],empty:[]}),ue=e.useRef({targetScrollY:0,targetScrollX:0,animating:!1,animationFrameId:0}),de=e.useRef(!1),me=e.useRef(0),pe=e.useRef(null);function fe(){return e.useRef({width:0,height:0})}const ge=fe(),he=fe(),be=fe(),[ve,ye,xe,Ee,je,Oe,we,Se]=function(...e){return e.map(m)}(C,H,E,j,Y,R,W,w),Re=e.useMemo((()=>{var e,t;return{value:"number"==typeof(null==C?void 0:C.value)||"string"==typeof(null==C?void 0:C.value)?[C.value,C.value]:null!==(e=null==C?void 0:C.value)&&void 0!==e?e:[null],duration:null!==(t=null==C?void 0:C.duration)&&void 0!==t?t:200}}),[ve]),Me={color:null,size:40},ke=e.useMemo((()=>"object"==typeof L?Object.assign(Object.assign({},Me),L):Me),[L]),Te=e.useMemo((()=>Object.assign(Object.assign({},Me),"object"==typeof k.arrows?k.arrows:{})),[k.arrows]),$e=e.useCallback((t=>{if(null==t)return[];if(e.isValidElement(t)){const r=t;return r.type===e.Fragment?e.Children.toArray(r.props.children).flatMap($e):[r]}return[t]}),[]),ze=e.useMemo((()=>e.Children.toArray(A).flatMap($e).map((t=>e.isValidElement(t)&&t.key?String(t.key):null)).filter((e=>null!==e)).filter((e=>{var t;return"clear"!==(null==Y?void 0:Y.mode)||!(null===(t=ae.current.empty)||void 0===t?void 0:t.includes(e))}))),[A,je,null===(P=ae.current.empty)||void 0===P?void 0:P.join()]),[Ce,Le,Ae,Fe]=S?t(S):[0,0,0,0],Ne=Ce+Ae,Ie=Fe+Le,[We,Xe]=e.useMemo((()=>{var e,t;return"number"==typeof w?[w,w]:Array.isArray(w)?[null!==(e=w[1])&&void 0!==e?e:0,null!==(t=w[0])&&void 0!==t?t:0]:[0,0]}),[w]),He=e.useMemo((()=>t((null==H?void 0:H.rootMargin)||0,"x"===O)),[ye,O]),[Ye,Be]=He?[He[2],He[0]]:[0,0],Pe=e.useMemo((()=>{const[e,t]=Array.isArray(E)?E:"number"==typeof E?[E,E]:[ge.current.width,ge.current.height];if(!k.arrows||!Te.size)return[e,t,e,t];const r=2*Te.size;let n=e,o=t;return"x"===O?n=e-r:"y"===O?o=t-r:"hybrid"===O&&(n=e-r,o=t-r),[n,o,e,t]}),[xe,Te.size,ge.current]),qe="x"===O?Pe[0]:Pe[1],De=e.useMemo((()=>j?t(j,!0,2):[null,null]),[Ee]),Ve=JSON.stringify(De),Ke=e.useMemo((()=>{const e=(e,t)=>"number"==typeof e?e:"firstChild"===e?t:0;return[e(De[0]&&"none"!==De[0]?De[0]:"y"===O?Pe[0]:0,be.current.width),e(De[1]&&"none"!==De[1]?De[1]:"x"===O?Pe[1]:0,be.current.height)]}),[Ve,be.current]),Ge=e.useMemo((()=>{const e="x"===O,t="row"===I,r="column"===I,n=e?Pe[1]:Pe[0],o=e?Ke[1]+Xe:Ke[0]+We,l="hybrid"===O?o*(ze.length+1)-o:n,s=Math.floor(l/o)||1,i=B&&B<=s?"hybrid"===O?Math.ceil(s/B):B:s,c=i>1&&i<ze.length?Math.ceil(ze.length/i):ze.length,a=B&&B<ze.length;if("hybrid"===O){return[a?t?B:i:t?ze.length:1,a?r?B:i:r?ze.length:1]}return[i,c]}),[ze.length,O,Ke.join(),Pe.join(),We,Ie,Ne,B]),Ue=e.useMemo((()=>{const e=Ge[0]?Ge[0]*Xe-Xe:0,t="x"===O?Ge[1]:Ge[0];return Ke[0]?(Ke[0]+Xe)*t-Xe:(null==H?void 0:H.type)?be.current.width+e:he.current.width}),[Ke[0],Ge.join(),Xe,he.current.width,be.current,ye]),_e=e.useMemo((()=>{const e=Ge[1]<1?1:Ge[0]*We-We;return Ke[1]?"x"===O?(Ke[1]+We)*Ge[0]-We:(Ke[1]+We)*Ge[1]-We:(null==H?void 0:H.type)?be.current.height+e:he.current.height}),[Ke[1],Ge.join(),We,he.current.height,be.current,ye]),Je=e.useMemo((()=>_e+Ne),[_e,Ne]),Qe=e.useMemo((()=>Ue+Ie),[Ue,Ie]),Ze="x"===O?Qe:Je,et="x"===O?(null===(q=oe.current)||void 0===q?void 0:q.scrollLeft)||0:(null===(D=oe.current)||void 0===D?void 0:D.scrollTop)||0,tt=et>1&&!0,rt=Math.round(et+qe)<Ze;let nt=!1,ot=!1;"hybrid"===O&&(nt=((null===(V=oe.current)||void 0===V?void 0:V.scrollLeft)||0)>1&&!0,ot=Math.round(((null===(K=oe.current)||void 0===K?void 0:K.scrollLeft)||0)+Pe[0])<Qe);const lt=e.useMemo((()=>{if(!k.progressElement||!Ze)return 0;const e=Math.round(qe/Ze*qe);return!Number.isFinite(e)||e<0?0:e}),[qe,Ze,k.progressElement]),st=e.useMemo((()=>{if(!k.progressElement)return 0;const e=Math.round(Pe[0]/Qe*Pe[0]);return!Number.isFinite(e)||e<0?0:e}),[Pe[0],Qe,k.progressElement]),it=e.useMemo((()=>qe?Ze-qe:Ze),[Ze,qe]),ct=e.useMemo((()=>Pe[0]?Qe-Pe[0]:Qe),[Qe,Pe[0]]),at=e.useCallback((()=>{if(!(null==H?void 0:H.type)||Ge[0]<=1)return[];const e=Array.from({length:ze.length},((e,t)=>t)),t=Array.from({length:Ge[0]},(()=>[])),r="x"===O&&"column"===I||"x"!==O&&"row"===I;return e.forEach((e=>{const n=r?e%Ge[0]:Math.floor(e/Ge[1]);t[n]&&t[n].push(e)})),t}),[ze.length,Ge.join(),ye,I,O]),ut=e.useMemo((()=>{if(!(null==H?void 0:H.type))return[{elementTop:0,elementBottom:0,left:0,right:0}];let e=[],t=0;if(N){const r=Array.from({length:ze.length},((e,t)=>t)),n=Math.abs(Math.floor(ze.length/Ge[0])*Ge[0]-ze.length);e=n?r.slice(-n):[],"center"===N?t=(Ke[0]+Xe)*(Ge[0]-n)/2:"end"===N&&(t=(Ke[0]+Xe)*(Ge[0]-n))}return ze.map(((r,n)=>{const o=function(e,t){for(let r=0;r<t.length;r++){const n=t[r].indexOf(e);if(-1!==n){const e=["hybrid","y"].includes(O)?n:r;return["x"===O?n:r,e]}}return[0,0]}(n,at()),l=e.length>0&&e.includes(n)?t:0,s=function(e){const t="x"===O?l:0;return e>0?t+(Ke[1]+We)*e:t}(Ge[0]>1||["hybrid","x"].includes(O)?o[1]:n),i=Ke[1]?s+Ke[1]:s,c=function(e){const t="x"===O?0:l;return e>0?t+(Ke[0]+Xe)*e:t}(1===Ge[0]&&"x"===O?n:o[0]),a=c+Ke[0];return{elementTop:s,elementBottom:i,left:c,right:a}}))}),[A,Ke.join(),w,ye,Ge[0],I]),dt=e.useMemo((()=>(null==Pe?void 0:Pe.length)&&W?function(e,t,r,n){const[o,l="start"]="string"==typeof e?[e,e]:e,s=e=>"start"===e?"flex-start":"center"===e?"center":"flex-end",i={display:"flex"};return t[0]>r&&(i.justifyContent=s(o)),t[1]>n&&(i.alignItems=s(l)),i}(W,Pe,Qe,Je):{}),[W,Pe.join(),Je,Qe]),mt=e.useMemo((()=>[c(Qe,Pe[0]),c(Je,Pe[1])]),[Qe,Je,Pe.join()]),pt=e.useMemo((()=>"x"===O?mt[0]:mt[1]),[O,mt[0],mt[1]]),ft=e.useCallback((e=>{if(!T)return;const t=()=>((e,t,r,n)=>{if(!e)return;e.querySelectorAll(`.${t}`).forEach(((e,t)=>{const o=e;["mouseleave","mouseup","touchend"].includes(r.type)?(o.style.opacity="0",o.classList.remove("hover"),o.classList.add("leave"),n(`mouseOnRef${t}-anim`,(()=>o.classList.remove("leave")),200)):(o.style.opacity="1",o.classList.add("hover"))}))})(ne.current,"ms-bar",e,v);"mouseleave"===e.type?!["thumb","slider","wrapp"].includes(ce.current)&&t():t()}),[T,y,ce.current,ne.current]),gt=e.useCallback((e=>{oe.current&&(({arrowType:e,scrollElement:t,wrapSize:r,scrollSize:n,smoothScroll:o})=>{const l=r[0],s=r[1],i=t.scrollTop,c=t.scrollLeft,u=["top","bottom"].includes(e)?s:l,d=(e,t)=>o(a(e,0,u),t);"top"===e&&i>0?d(i-n[1],"y"):"left"===e&&c>0&&d(c-n[0],"x"),"bottom"===e&&i+n[1]!==s?d(i+n[1],"y"):"right"===e&&c+n[0]!==l&&d(c+n[0],"x")})({arrowType:e,scrollElement:oe.current,wrapSize:[Qe,Je],scrollSize:Pe,smoothScroll:Ot})}),[oe.current,Pe.join(),Qe,Je]),ht=e.useCallback((()=>{u(y,re.current,se);const e=oe.current;ne.current&&e&&0!==se.current.length&&((e,t,r,n)=>{!function(){var o,l,s,i;const c=null!==(l=null===(o=t[0])||void 0===o?void 0:o.querySelectorAll(".sliderElem"))&&void 0!==l?l:[],a=null!==(i=null===(s=t[1])||void 0===s?void 0:s.querySelectorAll(".sliderElem"))&&void 0!==i?i:[];function u(e,t,r,n){const o="x"===n?r.scrollLeft:r.scrollTop;e.forEach(((e,r)=>{const l="x"===n?t[0]:t[1],s=o>=l*r&&o<l*(r+1);e.classList.toggle("active",s)}))}c.length>0&&u(c,r,e,n),a.length>0&&u(a,r,e,"x")}()})(e,se.current,Pe,O)}),[Pe.join(),O,oe,ne,se,y]),bt=e.useCallback((()=>{const e=oe.current;e&&(null==F||F(e.scrollLeft,e.scrollTop),de.current=!0,null==X||X(!0),v("handleScroll-anim",(()=>{de.current=!1,null==X||X(!1),(null==H?void 0:H.type)?te():U()}),200),"slider"===y&&_(),(null==H?void 0:H.type)||U(),te())}),[O,F,X,ye,y,_]),vt=a(et/it*(qe-lt),0,qe-lt),yt=a(((null===(G=oe.current)||void 0===G?void 0:G.scrollLeft)||0)/ct*(Pe[0]-Pe[0]/Qe*Pe[0]),0,Pe[0]-st),xt=e.useCallback(d(ge,te),[]),Et=e.useCallback(d(he,te,Ie,Ne),[Ie,Ne]),jt=e.useCallback(d(be,te),[]),Ot=e.useCallback(((e,t,r)=>{const n=oe.current;return n?function(e,t,r,n,o){let l;if(!t)return null;const s=performance.now(),i=t.scrollTop,c=t.scrollLeft,a=u=>{const d=u-s,m=Math.min(d/r,1);"y"===e?t.scrollTop=i+(n-i)*m:"x"===e&&(t.scrollLeft=c+(n-c)*m),m<1?l=requestAnimationFrame(a):null==o||o()};return l=requestAnimationFrame(a),()=>cancelAnimationFrame(l)}(t,n,Re.duration,e,r):null}),[oe,Re.duration]),wt=e.useCallback(((e,t="mousedown",r)=>{const n=e||("scroll"===y?"thumb":"slider");if("wrapp"===e&&!k.content||["thumb","slider"].includes(n)&&!k.progressElement)return;u(y,re.current,se);let o=null;if(r){o=r.getAttribute("data-direction")}!function(e){const t=new AbortController,{signal:r}=t;e.clickedObject.current=e.clicked,e.triggerUpdate(),"mousedown"===e.eventType?(["thumb","slider"].includes(e.clicked)&&e.mouseOnEl(e.scrollBar),"wrapp"===e.clicked&&e.mouseOnEl(e.objectsWrapperRef),document.addEventListener("mousemove",(t=>p(Object.assign(Object.assign({},e),{mouseEvent:t}))),{signal:r}),document.addEventListener("mouseup",(r=>f(Object.assign(Object.assign({},e),{mouseEvent:r,controller:t}))),{signal:r})):"touchstart"===e.eventType&&(document.addEventListener("touchmove",(t=>p(Object.assign(Object.assign({},e),{mouseEvent:t}))),{signal:r}),document.addEventListener("touchend",(r=>f(Object.assign(Object.assign({},e),{mouseEvent:r,controller:t}))),{signal:r})),document.body.style.cursor="grabbing"}({eventType:t,scrollElementRef:oe.current,objectsWrapperRef:le.current,scrollBar:r||null,clickedObject:ce,scrollContentRef:ne.current,scrollStateRef:ue.current,type:y,scrollBarOnHover:T,mouseOnEl:g,mouseOnRefHandle:ft,triggerUpdate:te,direction:O,smoothScroll:Ot,sizeLocal:[Pe[0],Pe[1]],clicked:n,numForSliderRef:me,isScrollingRef:de,prevCoordsRef:pe,thumbSize:"x"===o?st:lt,axisFromAtr:o})}),[y,k.content,k.progressElement,Pe.join(),lt,st]),St=e.useCallback((e=>{wt(null,e.type,e.target)}),[wt]),Rt=e.useCallback((()=>{wt("wrapp")}),[wt]),Mt=e.useCallback((()=>{re.current&&((e,t,r,n)=>{const{allIds:o,emptyKeysRaw:l}=(()=>{const t=[],r=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e instanceof Element&&e.hasAttribute(h)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});let o=n.nextNode();for(;o;){const e=o,l=e.getAttribute(h);l&&(t.push(l),0===e.children.length&&r.push(l)),o=n.nextNode()}return{allIds:t,emptyKeysRaw:r}})(),s=new Set(t.current.loaded);o.forEach((e=>s.add(e)));let i=null;if(t.current.empty){const e=new Set(t.current.empty);l.forEach((t=>e.add(t))),i=Array.from(e)}t.current={loaded:"lazy"===n?Array.from(s):o.map((e=>e)),empty:i},r()})(re.current,ae,te,null==H?void 0:H.type)}),[ye]),kt=e.useCallback((e=>{(null==Y?void 0:Y.clickTrigger)&&((e,t,r,n)=>{e.target.closest(r.selector)&&t("emptyKeys-anim",(()=>{n()}),r.delay||0)})(e,v,Y.clickTrigger,Mt)}),[je]),Tt=e.useCallback(((e,t,r,n,o,l)=>{if(ie.current||(ie.current=ze[0]),ie.current===ze[0]&&null!==t){if("end"===t&&r>n){const t=Ot(o,e);t&&l.push(t)}else if("number"==typeof t){const r=Ot(t,e);r&&l.push(r)}ie.current=ze[0]}}),[ze[0]]),$t=e.useMemo((()=>{const e=Object.assign(Object.assign(Object.assign(Object.assign({margin:S?`${Ce}px ${Le}px ${Ae}px ${Fe}px`:"",height:De[1]&&"none"!==De[1]?`${_e}px`:"fit-content",width:De[0]&&"none"!==De[0]?`${Ue}px`:"fit-content"},k.content&&{cursor:"grab"}),w&&!(null==H?void 0:H.type)&&{gap:`${We}px ${Xe}px`}),R&&function(e,t,r,n,o){const l=(e,t)=>"full"===e?("x"===t?r[0]:r[1])-("x"===t?n:o):e;if("hybrid"!==t&&!Array.isArray(e)){const r=`${l(e,t)}px`;return"x"===t?{minWidth:r}:{minHeight:r}}let s,i;return Array.isArray(e)?[s,i]=e:s=i=e,{minWidth:`${l(s,"x")}px`,minHeight:`${l(i,"y")}px`}}(R,O,Pe,Ie,Ne)),W&&{flexShrink:0});if(null==H?void 0:H.type)return Object.assign(Object.assign({},e),{position:"relative"});const t=Ge[0]>1&&"hybrid"===O,r=t?I:"x"===O?"row":"column",n=De[1]?"wrap":void 0,o=t&&N?"start"===N?"flex-start":"center"===N?"center":"flex-end":void 0,l=t?void 0:"center";return Object.assign(Object.assign(Object.assign(Object.assign({},e),{display:"flex",flexDirection:r,flexWrap:n}),o&&{justifyContent:o}),l&&{alignItems:l})}),[S,[Ce,Le,Ae,Fe,Ie,Ne].join(),De[1],_e,Ue,k.content,Se,[We,Xe].join(),null==H?void 0:H.type,Oe,O,Pe.join(),we,Ge[0],I,N]);e.useEffect((()=>{(Y||(null==H?void 0:H.type))&&(Y||null===ae.current.empty||(ae.current.empty=null),U())}),[je,null==H?void 0:H.type,ye,de.current,ze.length]),e.useEffect((()=>(((null==H?void 0:H.type)||X)&&(X&&X(!1),te()),ht(),()=>{ue.current.animationFrameId&&cancelAnimationFrame(ue.current.animationFrameId),(()=>{for(const e of b.values())clearTimeout(e);b.clear()})()})),[]),e.useEffect((()=>{const e=oe.current;if(!e)return;const t=k.wheel?t=>function(e,t,r,n){e.preventDefault(),r.animating||(r.targetScrollX=t.scrollLeft,r.targetScrollY=t.scrollTop),"x"===n?r.targetScrollX=a(r.targetScrollX+e.deltaY,0,t.scrollWidth-t.clientWidth+2):r.targetScrollY=a(r.targetScrollY+e.deltaY,0,t.scrollHeight-t.clientHeight+2),r.animating||(r.animating=!0,r.animationFrameId=requestAnimationFrame((function e(){const o=.4;let l=0;"x"===n?(t.scrollLeft+=(r.targetScrollX-t.scrollLeft)*o,l=Math.abs(t.scrollLeft-r.targetScrollX)):(t.scrollTop+=(r.targetScrollY-t.scrollTop)*o,l=Math.abs(t.scrollTop-r.targetScrollY)),l>2.5?r.animationFrameId=requestAnimationFrame(e):(r.animating=!1,null!==r.animationFrameId&&(cancelAnimationFrame(r.animationFrameId),r.animationFrameId=null))})))}(t,e,ue.current,O):e=>e.preventDefault();return e.addEventListener("wheel",t,{passive:!1}),()=>{e.removeEventListener("wheel",t)}}),[O,k.wheel]),e.useEffect((()=>{if(!Re.value||0===ze.length)return;const e=[];return("hybrid"===O?["x","y"]:[O]).forEach((t=>{const r="x"===t?0:1;"end"===Re.value[r]&&Tt(t,"end","x"===t?Qe:Je,Pe[r],"x"===t?ct:it,e)})),()=>{e.forEach((e=>e()))}}),[Re.value.join(),ze[0],ze.length,it]),e.useEffect((()=>{if(!Re.value||0===ze.length)return;const e=[];return("hybrid"===O?["x","y"]:[O]).forEach((t=>{const r="x"===t?0:1;"number"==typeof Re.value[r]&&Tt(t,Re.value[r],"x"===t?Qe:Je,Pe[r],"x"===t?ct:it,e)})),()=>{e.forEach((e=>e()))}}),[Re.value.join(),null==C?void 0:C.updater]);const zt=e.useCallback(((t,r,n,o)=>{var l;const s=Object.assign({width:Ke[0]?`${Ke[0]}px`:void 0,height:Ke[1]?`${Ke[1]}px`:void 0},(null==H?void 0:H.type)&&Object.assign({position:"absolute",top:`${r}px`,left:`${n}px`},!Ke[0]&&1===Ge[0]&&{transform:"translateX(-50%)"})),i=$?e.createElement(e.Suspense,{fallback:z},o):o,c=(null===(l=null==Y?void 0:Y.clickTrigger)||void 0===l?void 0:l.selector)&&kt;return e.createElement("div",Object.assign({key:t},H||Y?{[h]:`${t}`}:{},{className:"ms-object-box",style:s,onClick:c}),i)}),[$,!!z,Ke.join(),oe.current,ye,je,Ge[0]]),Ct=e.createElement("div",{className:"ms-objects-wrapper",ref:le,onMouseDown:Rt,style:$t},ze.map(((t,n)=>{var o,l,s;const i=e.Children.toArray(A).find((r=>e.isValidElement(r)&&r.key===t)),c=(null==H?void 0:H.stopLoadOnScroll)&&de.current&&!ae.current.loaded.includes(`${t}`)?z:(null===(o=ae.current.empty)||void 0===o?void 0:o.includes(t))?"object"==typeof(null==Y?void 0:Y.mode)?Y.mode.fallback:z:i,a="number"==typeof De[0]&&"number"==typeof De[1]||"firstChild"!==De[0]&&"firstChild"!==De[1]||0!==n?c:e.createElement(r,{onResize:jt},c);if(!(null==H?void 0:H.type))return zt(t,0,0,a);{const{elementTop:e,elementBottom:r,left:o,right:i}=ut[n],c="x"===O?Ye:Be,u=qe+c>("x"===O?o:e)-et&&("x"===O?i:r)-et>0-c,d="hybrid"!==O||Pe[0]+Ye>o-((null===(l=oe.current)||void 0===l?void 0:l.scrollLeft)||0)&&i-((null===(s=oe.current)||void 0===s?void 0:s.scrollLeft)||0)>0-Ye;if(u&&d)return zt(t,e,o,a)}}))),Lt=[{positionType:"x"===O?"left":"top",visibility:tt},{positionType:"x"===O?"right":"bottom",visibility:rt},..."hybrid"===O?[{positionType:"left",visibility:nt},{positionType:"right",visibility:ot}]:[]],At=e.createElement("div",{"morph-scroll":`〈♦${J}〉`,className:`${x&&x}`,ref:re,style:{width:`${Pe[2]}px`,height:`${Pe[3]}px`}},e.createElement("div",{className:"ms-content",ref:ne,onMouseEnter:ft,onMouseLeave:ft,onTouchStart:ft,onTouchEnd:ft,style:Object.assign({position:"relative",width:`${Pe[0]}px`,height:`${Pe[1]}px`},k.arrows&&Te.size&&("x"===O?{left:`${Te.size}px`}:"y"===O?{top:`${Te.size}px`}:{top:`${Te.size}px`,left:`${Te.size}px`}))},e.createElement("div",{className:"ms-element",ref:oe,onScroll:bt,style:Object.assign(Object.assign(Object.assign({width:"100%",height:"100%"},dt),{overflow:{x:""+(Qe>Pe[0]?"scroll hidden":"hidden"),y:""+(Je>Pe[1]?"hidden scroll":"hidden"),hybrid:`${Qe>Pe[0]?"scroll":"hidden"} ${Je>Pe[1]?"scroll":"hidden"}`,hide:"hidden"}[k.wheel||k.content?O:"hide"]}),"scroll"!==y||"boolean"!=typeof k.progressElement||!1===k.progressElement?{scrollbarWidth:"none"}:{})},De[0]&&De[1]?Ct:e.createElement(r,{onResize:Et,style:Object.assign({},dt)},Ct)),L&&Lt.map((({positionType:t,visibility:r})=>e.createElement(s,{key:`edge-${t}`,edgeGradient:ke,visibility:r,edgeType:t}))),k.progressElement&&!0!==k.progressElement&&[{shouldRender:lt<Ze,direction:O,thumbSize:lt,thumbSpace:vt,objLengthPerSize:pt,progressReverseIndex:0},{shouldRender:"hybrid"===O&&st<Qe,direction:"x",thumbSize:st,thumbSpace:yt,objLengthPerSize:mt[0],progressReverseIndex:1}].filter((({shouldRender:e})=>e)).map((t=>e.createElement(l,{key:t.direction,type:y,direction:t.direction,progressReverse:"boolean"==typeof M?M:M[t.progressReverseIndex],size:Pe,progressTrigger:k,scrollBarOnHover:T,scrollBarEvent:"sliderMenu"===y?Ot:St,thumbSize:t.thumbSize,thumbSpace:t.thumbSpace,objLengthPerSize:t.objLengthPerSize,sliderCheckLocal:ht})))),k.arrows&&Lt.map((({positionType:t,visibility:r})=>e.createElement(i,{key:`arrow-${t}`,activity:r,arrows:Te,arrowType:t,handleArrow:gt,size:"hybrid"===O?Pe[0]+2*Te.size:Pe[0]}))));return"auto"===E?e.createElement(r,{measure:"outer",onResize:xt},At):At},exports.ResizeTracker=r;
